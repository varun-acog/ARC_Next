"use strict";(()=>{var e={};e.id=358,e.ids=[358],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},7701:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>g,patchFetch:()=>f,requestAsyncStorage:()=>p,routeModule:()=>u,serverHooks:()=>l,staticGenerationAsyncStorage:()=>d});var o={};r.r(o),r.d(o,{POST:()=>c});var n=r(9303),a=r(8716),s=r(670),i=r(7070);async function c(e){let t=process.env.LDAP_USERNAME,r=process.env.LDAP_PASSWORD,o=process.env.API_BASE_URL;if(!t||!r||!o)return console.error("Missing environment variables at",new Date().toISOString()),i.NextResponse.json({error:"Server configuration error"},{status:500});let n=Buffer.from(`${t}:${r}`).toString("base64"),a=await e.formData(),s={};for(let[e,t]of a.entries())s[e]=t;console.log("Request body to /api/contracts/generate:",s);let{enterprise_name:c,client_name:u,effective_date:p,valid_duration:d,notice_period:l,template_type:g,session_id:f}=s;if(!c||!u||!p||!d||!l||!g||!f)return console.error("Missing required fields in request:",{enterprise_name:c,client_name:u,effective_date:p,valid_duration:d,notice_period:l,template_type:g,session_id:f}),i.NextResponse.json({error:"Missing required fields"},{status:400});let m=new URLSearchParams(s).toString();try{let e=await fetch(`${o}/api/contracts/generate`,{method:"POST",headers:{Accept:"application/vnd.openxmlformats-officedocument.wordprocessingml.document","Content-Type":"application/x-www-form-urlencoded",Authorization:`Basic ${n}`},body:m});if(!e.ok){let t=await e.json();return console.error("Contract generation failed:",e.status,t,"at",new Date().toISOString()),i.NextResponse.json({error:t.error||"Failed to generate contract",details:t},{status:e.status})}let t=await e.arrayBuffer();return console.log("Contract generated for session",f,"at",new Date().toISOString()),new i.NextResponse(t,{status:200,headers:{"Content-Type":"application/vnd.openxmlformats-officedocument.wordprocessingml.document","Content-Disposition":'attachment; filename="contract.docx"'}})}catch(e){return console.error("Error generating contract:",e.message,"at",new Date().toISOString()),i.NextResponse.json({error:"Failed to generate contract"},{status:500})}}let u=new n.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/contracts/generate/route",pathname:"/api/contracts/generate",filename:"route",bundlePath:"app/api/contracts/generate/route"},resolvedPagePath:"/Users/varun/work/ARC_Next/app/api/contracts/generate/route.js",nextConfigOutput:"",userland:o}),{requestAsyncStorage:p,staticGenerationAsyncStorage:d,serverHooks:l}=u,g="/api/contracts/generate/route";function f(){return(0,s.patchFetch)({serverHooks:l,staticGenerationAsyncStorage:d})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[276,972],()=>r(7701));module.exports=o})();