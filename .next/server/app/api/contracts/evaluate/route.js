"use strict";(()=>{var e={};e.id=443,e.ids=[443],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},1733:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>v,patchFetch:()=>m,requestAsyncStorage:()=>d,routeModule:()=>c,serverHooks:()=>x,staticGenerationAsyncStorage:()=>g});var o={};r.r(o),r.d(o,{POST:()=>u});var s=r(9303),a=r(8716),n=r(670),i=r(7070);let l=process.env.LDAP_USERNAME,p=process.env.LDAP_PASSWORD;async function u(e){try{let t;let r=(await e.formData()).get("session_id");if(console.log("Evaluate - Session ID:",r),!r)return console.log("Error: Session ID is required"),i.NextResponse.json({error:"Session ID is required"},{status:400});if(!l||!p)return console.log("Error: LDAP credentials are missing in environment variables"),i.NextResponse.json({error:"LDAP credentials are missing in environment variables"},{status:500});let o=`${l}:${p}`,s="Basic "+Buffer.from(o).toString("base64");console.log("Basic Auth header prepared (redacted for security)");let a=new URLSearchParams;a.append("session_id",r),console.log("External request body:",a.toString()),console.log("Sending evaluation request to external endpoint...");let n=await fetch("https://demo-legal-llm-backend-1.hpc4.aganitha.ai/api/contracts/evaluate",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded",Authorization:s},body:a});console.log("External endpoint response status:",n.status);let u=await n.text();if(console.log("External endpoint response body:",u),!n.ok){let e=n.headers.get("Content-Type"),t="Failed to evaluate contract via external endpoint",r={};if(e&&e.includes("application/json"))try{t=(r=JSON.parse(u)).error||r.detail||"External API returned an error with no details"}catch(e){console.error("Failed to parse error response as JSON:",e.message),t="Invalid error response from external API"}else t=`${t} (Status: ${n.status} ${n.statusText})`;return console.log("External endpoint error details:",r),console.log("External endpoint error:",t),i.NextResponse.json({error:t,details:r},{status:n.status})}try{t=JSON.parse(u)}catch(e){return console.error("Failed to parse external response as JSON:",e.message),i.NextResponse.json({error:"Invalid response from external API"},{status:500})}return console.log("External endpoint parsed response:",t),i.NextResponse.json(t,{status:200})}catch(e){return console.error("Evaluation error:",e.message),i.NextResponse.json({error:"Internal server error",details:e.message},{status:500})}}let c=new s.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/contracts/evaluate/route",pathname:"/api/contracts/evaluate",filename:"route",bundlePath:"app/api/contracts/evaluate/route"},resolvedPagePath:"/Users/varun/work/ARC_Next/app/api/contracts/evaluate/route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:d,staticGenerationAsyncStorage:g,serverHooks:x}=c,v="/api/contracts/evaluate/route";function m(){return(0,n.patchFetch)({serverHooks:x,staticGenerationAsyncStorage:g})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[276,972],()=>r(1733));module.exports=o})();